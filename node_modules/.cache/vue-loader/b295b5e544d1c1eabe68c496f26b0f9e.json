{"remainingRequest":"E:\\vue项目\\CareerPanning\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue项目\\CareerPanning\\src\\components\\index\\indexHeader\\userInfor.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue项目\\CareerPanning\\src\\components\\index\\indexHeader\\userInfor.vue","mtime":1608029086835},{"path":"E:\\vue项目\\CareerPanning\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue项目\\CareerPanning\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue项目\\CareerPanning\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue项目\\CareerPanning\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default{\n\tdata(){\n\t\treturn{\n\t\t\taccountId:this.$route.params.account,\n\t\t\tuserInfor:{\n\t\t\t\tdepartmentName:'',\n\t\t\t\tmajorName:'',\n\t\t\t\tstudent:{\n\t\t\t\t\tschool:'',\n\t\t\t\t\tstudentId:'',\n\t\t\t\t\tstudentName:''\n\t\t\t\t}\n\t\t\t},//存放学生信息\n\t\t\tdisUserInfor:true,//是否显示个人信息\n\t\t\tchaUserInfor:false,//是否显示修改个人信息\n\t\t\taltUserForm:{\n\t\t\t\t\n\t\t\t},//存放需要修改的数据\n\t\t\tdepartments:[],//存放学校系部\n\t\t\tcareers:[],//存放系部专业\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.getUserInfor();\n\t\tthis.getDepartment();\n\t},\n\tmethods:{\n\t\t//将修改后的数据传回header.vue\n\t\tsendToHeader(){\n\t\t\t\n\t\t},\n\t\t//获取系部\n\t\tgetDepartment(){\n\t\t\tthis.$axios({\n\t\t\t   method: 'get',\n\t\t\t   url:this.COMMON.apiUrl+'/department/getList',\n\t\t\t }).then(response => {  // 请求成功\n\t\t\t\tlet depData=[];\n\t\t\t\tdepData=response.data.data;\n\t\t\t\tfor(let i=0;i<depData.length;i++){\n\t\t\t\t\tthis.$set(this.departments,i,{'value':depData[i].departmentId,'label':depData[i].departmentName})\n\t\t\t\t}\n\t\t\t}).catch(error => {  // 请求失败\n\t\t\t\tconsole.log('请求失败');\n\t\t\t\tconsole.log(error);\n\t\t\t})\n\t\t},\n\t\t\n\t\t//根据系部的名称，获取对应的专业名称\n\t\tgetCareer(){\n\t\t\tif(this.altUserForm.departmentId!=''){\n\t\t\t\tthis.$axios({\n\t\t\t\t   method: 'get',\n\t\t\t\t   url:this.COMMON.apiUrl+'/major/getList',\n\t\t\t\t }).then(response => {  // 请求成功\n\t\t\t\t\tconsole.log('专业')\n\t\t\t\t\tconsole.log(response.data.data);\n\t\t\t\t\tlet majData=[];\n\t\t\t\t\tlet j=0;\n\t\t\t\t\tmajData=response.data.data;\n\t\t\t\t\tfor(let i=0;i<majData.length;i++){\n\t\t\t\t\t\tif(majData[i].departmentId==this.altUserForm.departmentId){\n\t\t\t\t\t\t\tthis.$set(this.careers,j,{'value':majData[i].majorId,'label':majData[i].majorName});\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).catch(error => {  // 请求失败\n\t\t\t\t\tconsole.log('请求失败');\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t//显示修改个人信息界面\n\t\tchangeShow(){\n\t\t\tthis.disUserInfor=!this.disUserInfor;\n\t\t\tthis.chaUserInfor=!this.disUserInfor;\n\t\t},\n\t\t\n\t\t//展示选中的数据\n\t\tobtainValue(value) {\n\t\t\tconsole.log(value)\n\t\t},\n\t\t//获取用户信息\n\t\tgetUserInfor(){\n\t\t\tthis.$axios({\n\t\t\t\t method: 'get',\n\t\t\t\t url:this.COMMON.apiUrl+'/student/getById',\n\t\t\t\t params:{\n\t\t\t\t\tid:this.accountId\n\t\t\t\t }\n\t\t\t }).then(response => {\n\t\t\t\tconsole.log(response.data.data);\n\t\t\t\tthis.userInfor=response.data.data;\n\t\t\t}).catch(error => {  // 请求失败\n\t\t\t\tconsole.log('用户信息请求失败');\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t},\n\t\t\n\t\t//提交修改的信息\n\t\tsubmitNewInfor(formName){\n\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tlet num=Number(this.userId)\n\t\t\t\t\tlet alterData={};\n\t\t\t\t\talterData=this.altUserForm;\n\t\t\t\t\tthis.$set(alterData,'studentId',this.accountId);\n\t\t\t\t\tconsole.log('需要修改的数据');\n\t\t\t\t\tconsole.log(alterData);\n\t\t\t\t\tthis.$axios({\n\t\t\t\t\t\tmethod: 'put',\n\t\t\t\t\t\turl:this.COMMON.apiUrl+'/student/update',//修改学生信息\n\t\t\t\t\t\tdata:alterData\n\t\t\t\t\t}).then(response => {  // 请求成功\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t  message: '学生信息修改成功',\n\t\t\t\t\t\t  type: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.disUserInfor=true;\n\t\t\t\t\t\tthis.chaUserInfor=false;\n\t\t\t\t\t\tthis.getUserInfor();\n\t\t\t\t\t\tthis.$emit('studentInfor',false);\n\t\t\t\t\t}).catch(error => {  // 请求失败\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t  message: '学生信息修改失败',\n\t\t\t\t\t\t  type: 'warning'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t  message: '输入的数据格式不正确，请重新输入！',\n\t\t\t\t\t  type: 'warning'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t}\n}\n",{"version":3,"sources":["userInfor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userInfor.vue","sourceRoot":"src/components/index/indexHeader","sourcesContent":["<template>\r\n\t<div>\r\n\t  <div v-if='disUserInfor'>\r\n\t\t<div>\r\n\t\t  \t<font class=\"fontTitle\">学校名称：</font>\r\n\t\t  \t<font class=\"fontContent\">{{userInfor.student.school}}</font>\r\n\t\t</div>\r\n\t\t<div class=\"fontDiv\">\r\n\t\t\t<font class=\"fontTitle\">系部名称：</font>\r\n\t\t\t<font class=\"fontContent\">{{userInfor.departmentName}}</font>\r\n\t\t</div>\r\n\t\t<div class=\"fontDiv\">\r\n\t\t\t<font class=\"fontTitle\">专业名称：</font>\r\n\t\t\t<font class=\"fontContent\">{{userInfor.majorName}}</font>\r\n\t\t</div>\r\n\t\t<div class=\"fontDiv\">\r\n\t\t\t<font class=\"fontTitle\">学号：</font>\r\n\t\t\t<font class=\"fontContent\">{{userInfor.student.studentId}}</font>\r\n\t\t</div>\r\n\t\t<div class=\"fontDiv\">\r\n\t\t\t<font class=\"fontTitle\">姓名：</font>\r\n\t\t\t<font class=\"fontContent\">{{userInfor.student.studentName}}</font>\r\n\t\t</div>\r\n\t  </div>\r\n\t  \r\n\t  <div v-if='chaUserInfor'>\r\n\t  \t<el-form ref=\"altUserForm\" :model=\"altUserForm\" label-width=\"100px\">\r\n\t\t\t<!--选择系部-->\r\n\t\t\t<el-form-item\r\n\t\t\t  prop=\"departmentId\"\r\n\t\t\t  label=\"系部名称:\"\r\n\t\t\t  :rules=\"{\r\n\t\t\t    required: true, message: '系部名称不能为空', trigger: 'blur'\r\n\t\t\t  }\"\r\n\t\t\t>\r\n\t\t\t  <el-select @change=\"getCareer\" v-model=\"altUserForm.departmentId\" placeholder=\"请选择\" style=\"width:100%\">\r\n\t\t\t      <el-option\r\n\t\t\t        v-for=\"item in departments\"\r\n\t\t\t        :key=\"item.value\"\r\n\t\t\t        :label=\"item.label\"\r\n\t\t\t\t\twidth=\"100%\"\r\n\t\t\t        :value=\"item.value\"\r\n\t\t\t\t  >\r\n\t\t\t      </el-option>\r\n\t\t\t  </el-select>\r\n\t\t\t</el-form-item>\r\n\t\t\t\r\n\t  \t\t<el-form-item\r\n\t  \t\t\tlabel=\"专业名称\" \r\n\t  \t\t\tprop=\"majorId\"\r\n\t\t\t\t:rules=\"[\r\n\t\t\t\t\t { required: true, message: '专业名称不能为空', trigger: 'blur' }\r\n\t\t\t\t]\"\r\n\t  \t\t>\r\n\t  \t\t\t<el-select v-model=\"altUserForm.majorId\" placeholder=\"请选择\" style=\"width:100%\">\r\n\t  \t\t\t    <el-option\r\n\t  \t\t\t      v-for=\"item in careers\"\r\n\t  \t\t\t      :key=\"item.value\"\r\n\t  \t\t\t      :label=\"item.label\"\r\n\t  \t\t\t\t  width=\"100%\"\r\n\t  \t\t\t      :value=\"item.value\">\r\n\t  \t\t\t    </el-option>\r\n\t  \t\t\t</el-select>\r\n\t  \t\t</el-form-item>\r\n\t  \t\t<el-form-item\r\n\t  \t\t\tlabel=\"姓名\" \r\n\t  \t\t\tprop=\"studentName\" \r\n\t  \t\t>\r\n\t  \t\t    <el-input \r\n\t  \t\t\t\tv-model=\"altUserForm.studentName\"\r\n\t  \t\t\t></el-input>\r\n\t  \t\t</el-form-item>\r\n\t  \t\t\r\n\t  \t\t<div style=\"text-align: center;\">\r\n\t  \t\t  <el-button \r\n\t  \t\t\ttype=\"primary\" \r\n\t  \t\t\t@click=\"submitNewInfor('altUserForm')\"\r\n\t  \t\t  >\r\n\t  \t\t\t保存信息\r\n\t  \t\t  </el-button>\r\n\t\t\t  <el-button\r\n\t\t\t\t@click=\"changeShow\"\r\n\t\t\t  >\r\n\t\t\t  \t取消\r\n\t\t\t  </el-button>\r\n\t  \t\t</div>\r\n\t  \t</el-form>\r\n\t  </div>\r\n\t  <div style=\"text-align: center;\">\r\n\t\t<el-button @click=\"changeShow\" v-if='disUserInfor'>\r\n\t\t  修改信息\r\n\t\t</el-button>\r\n\t  </div>\r\n\t</div>\n</template>\n\n<script>\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\taccountId:this.$route.params.account,\r\n\t\t\t\tuserInfor:{\r\n\t\t\t\t\tdepartmentName:'',\r\n\t\t\t\t\tmajorName:'',\r\n\t\t\t\t\tstudent:{\r\n\t\t\t\t\t\tschool:'',\r\n\t\t\t\t\t\tstudentId:'',\r\n\t\t\t\t\t\tstudentName:''\r\n\t\t\t\t\t}\r\n\t\t\t\t},//存放学生信息\r\n\t\t\t\tdisUserInfor:true,//是否显示个人信息\r\n\t\t\t\tchaUserInfor:false,//是否显示修改个人信息\r\n\t\t\t\taltUserForm:{\r\n\t\t\t\t\t\r\n\t\t\t\t},//存放需要修改的数据\r\n\t\t\t\tdepartments:[],//存放学校系部\r\n\t\t\t\tcareers:[],//存放系部专业\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getUserInfor();\r\n\t\t\tthis.getDepartment();\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//将修改后的数据传回header.vue\r\n\t\t\tsendToHeader(){\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//获取系部\r\n\t\t\tgetDepartment(){\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t   method: 'get',\r\n\t\t\t\t   url:this.COMMON.apiUrl+'/department/getList',\r\n\t\t\t\t }).then(response => {  // 请求成功\r\n\t\t\t\t\tlet depData=[];\r\n\t\t\t\t\tdepData=response.data.data;\r\n\t\t\t\t\tfor(let i=0;i<depData.length;i++){\r\n\t\t\t\t\t\tthis.$set(this.departments,i,{'value':depData[i].departmentId,'label':depData[i].departmentName})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//根据系部的名称，获取对应的专业名称\r\n\t\t\tgetCareer(){\r\n\t\t\t\tif(this.altUserForm.departmentId!=''){\r\n\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t   method: 'get',\r\n\t\t\t\t\t   url:this.COMMON.apiUrl+'/major/getList',\r\n\t\t\t\t\t }).then(response => {  // 请求成功\r\n\t\t\t\t\t\tconsole.log('专业')\r\n\t\t\t\t\t\tconsole.log(response.data.data);\r\n\t\t\t\t\t\tlet majData=[];\r\n\t\t\t\t\t\tlet j=0;\r\n\t\t\t\t\t\tmajData=response.data.data;\r\n\t\t\t\t\t\tfor(let i=0;i<majData.length;i++){\r\n\t\t\t\t\t\t\tif(majData[i].departmentId==this.altUserForm.departmentId){\r\n\t\t\t\t\t\t\t\tthis.$set(this.careers,j,{'value':majData[i].majorId,'label':majData[i].majorName});\r\n\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//显示修改个人信息界面\r\n\t\t\tchangeShow(){\r\n\t\t\t\tthis.disUserInfor=!this.disUserInfor;\r\n\t\t\t\tthis.chaUserInfor=!this.disUserInfor;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//展示选中的数据\r\n\t\t\tobtainValue(value) {\r\n\t\t\t\tconsole.log(value)\r\n\t\t\t},\r\n\t\t\t//获取用户信息\r\n\t\t\tgetUserInfor(){\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\t method: 'get',\r\n\t\t\t\t\t url:this.COMMON.apiUrl+'/student/getById',\r\n\t\t\t\t\t params:{\r\n\t\t\t\t\t\tid:this.accountId\r\n\t\t\t\t\t }\r\n\t\t\t\t }).then(response => {\r\n\t\t\t\t\tconsole.log(response.data.data);\r\n\t\t\t\t\tthis.userInfor=response.data.data;\r\n\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\tconsole.log('用户信息请求失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//提交修改的信息\r\n\t\t\tsubmitNewInfor(formName){\r\n\t\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tlet num=Number(this.userId)\r\n\t\t\t\t\t\tlet alterData={};\r\n\t\t\t\t\t\talterData=this.altUserForm;\r\n\t\t\t\t\t\tthis.$set(alterData,'studentId',this.accountId);\r\n\t\t\t\t\t\tconsole.log('需要修改的数据');\r\n\t\t\t\t\t\tconsole.log(alterData);\r\n\t\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t\t\tmethod: 'put',\r\n\t\t\t\t\t\t\turl:this.COMMON.apiUrl+'/student/update',//修改学生信息\r\n\t\t\t\t\t\t\tdata:alterData\r\n\t\t\t\t\t\t}).then(response => {  // 请求成功\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t  message: '学生信息修改成功',\r\n\t\t\t\t\t\t\t  type: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.disUserInfor=true;\r\n\t\t\t\t\t\t\tthis.chaUserInfor=false;\r\n\t\t\t\t\t\t\tthis.getUserInfor();\r\n\t\t\t\t\t\t\tthis.$emit('studentInfor',false);\r\n\t\t\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t  message: '学生信息修改失败',\r\n\t\t\t\t\t\t\t  type: 'warning'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t  message: '输入的数据格式不正确，请重新输入！',\r\n\t\t\t\t\t\t  type: 'warning'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped=\"scoped\">\r\n\t.fontTitle{\r\n\t\tfont-size: 18px;\r\n\t}\r\n\t.fontContent{\r\n\t\tfont-size:15px;\r\n\t}\r\n\t.fontDiv{\r\n\t\tmargin-top: 10px;\r\n\t\tfont-size: 20px;\r\n\t}\n</style>\n"]}]}