{"remainingRequest":"E:\\vue项目\\CareerPanning\\node_modules\\babel-loader\\lib\\index.js!E:\\vue项目\\CareerPanning\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue项目\\CareerPanning\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue项目\\CareerPanning\\src\\components\\question_bank\\answer.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue项目\\CareerPanning\\src\\components\\question_bank\\answer.vue","mtime":1608209430915},{"path":"E:\\vue项目\\CareerPanning\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue项目\\CareerPanning\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue项目\\CareerPanning\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue项目\\CareerPanning\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      questionNum: 0,\n      //测试题总数\n      questionData: [],\n      //存放测试题\n      questionForm: [],\n      //存放答题结果\n      cancelanswer: false,\n      //是否显示   退出答题界面提示\n      submitanswer: false,\n      //是否显示   提交答题提示\n      showOption: false,\n      //选择答案后题号的样式\n      questionBankInfo: {},\n      //题库信息\n      answerDatas: {} //学生成绩\n\n    };\n  },\n  created: function created() {\n    //刷新界面时提示\n    this.listenPage();\n  },\n  mounted: function mounted() {\n    this.getAnswers();\n    this.getQuestionBank();\n    this.getQuestions();\n  },\n  methods: {\n    goBack: function goBack() {\n      this.cancelanswer = false;\n      this.$router.push('/index/' + this.$route.params.account + '/questionbank');\n    },\n    //提交答案\n    submitAnswer: function submitAnswer() {\n      var _this = this;\n\n      for (var i = 0; i < this.questionForm.length; i++) {\n        var total = this.questionForm.length - 1;\n\n        if (this.questionForm[i].value == '') {\n          var text = 'book' + (i + 1);\n          console.log('执行');\n          this.$message({\n            showClose: true,\n            message: '第' + (i + 1) + '题没有选择，请选择答案后再提交！',\n            type: 'warning'\n          });\n          document.getElementById(text).click();\n          break;\n        }\n\n        if (this.questionForm[total].value != '' && i == total) {\n          var name = this.$route.params.bankId.substring(0, 5);\n          var sum = 0;\n\n          for (var i = 0; i < this.questionForm.length; i++) {\n            switch (this.questionForm[i].value) {\n              case 'A':\n                sum = sum + this.questionBankInfo.scoreA;\n                break;\n\n              case 'B':\n                sum = sum + this.questionBankInfo.scoreB;\n                break;\n\n              case 'C':\n                sum = sum + this.questionBankInfo.scoreC;\n                break;\n\n              case 'D':\n                sum = sum + this.questionBankInfo.scoreD;\n                break;\n\n              case 'E':\n                sum = sum + this.questionBankInfo.scoreE;\n                break;\n            }\n          }\n\n          console.log('总分');\n          console.log(sum);\n          console.log('成绩');\n          console.log(this.answerDatas);\n          this.$set(this.answerDatas, name, sum);\n          this.$axios({\n            method: 'put',\n            url: this.COMMON.apiUrl2 + '/t-self-identification/update',\n            data: this.answerDatas\n          }).then(function (response) {\n            // 请求成功\n            console.log('数据修改成功');\n            console.log(response);\n\n            _this.$message({\n              showClose: true,\n              message: '答案提交成功！',\n              type: 'success'\n            });\n\n            _this.$router.push('/index/' + _this.$route.params.account + '/questionbank');\n          }).catch(function (error) {\n            // 请求失败\n            console.log('请求失败');\n            console.log(error);\n          });\n        }\n      }\n    },\n    getQuestionBank: function getQuestionBank() {\n      var _this2 = this;\n\n      var id = this.$route.params.bankId.substring(4, 5);\n      this.$axios({\n        method: 'get',\n        url: this.COMMON.apiUrl2 + '/question-bank/getById',\n        params: {\n          question_bank_id: id\n        }\n      }).then(function (response) {\n        // 请求成功\n        console.log('response  xxxx');\n        console.log(response);\n        var data = response.data.data;\n        _this2.questionBankInfo = data;\n      }).catch(function (error) {\n        // 请求失败\n        console.log('请求失败');\n        console.log(error);\n      });\n    },\n    //获取题库\n    getQuestions: function getQuestions() {\n      var _this3 = this;\n\n      var id = this.$route.params.bankId.substring(4, 5);\n      this.$axios({\n        method: 'get',\n        url: this.COMMON.apiUrl2 + '/questions/getById',\n        params: {\n          question_bank_id: id\n        }\n      }).then(function (response) {\n        // 请求成功\n        console.log('response  yyy');\n        console.log(response);\n        var data = response.data.data;\n        _this3.questionData = data;\n        _this3.questionNum = _this3.questionData.length;\n\n        for (var i = 0; i < _this3.questionData.length; i++) {\n          _this3.$set(_this3.questionForm, i, {\n            value: ''\n          });\n        }\n      }).catch(function (error) {\n        // 请求失败\n        console.log('请求失败');\n        console.log(error);\n      });\n    },\n    getAnswers: function getAnswers() {\n      var _this4 = this;\n\n      this.$axios({\n        method: 'get',\n        url: this.COMMON.apiUrl2 + '/t-self-identification/getStudentScoreById',\n        params: {\n          studentId: this.$route.params.account\n        }\n      }).then(function (response) {\n        // 请求成功\n        console.log('学生成绩');\n        console.log(response);\n        var data = response.data.data[0];\n        _this4.answerDatas = data;\n      }).catch(function (error) {\n        // 请求失败\n        console.log('请求失败');\n        console.log(error);\n      });\n    },\n    //选择选项时执行\n    chooseValue: function chooseValue(num) {\n      console.log('num');\n      console.log(num);\n      console.log(this.questionForm[num].value);\n    },\n    //答题界面刷新执行\n    listenPage: function listenPage() {\n      window.onbeforeunload = function (e) {\n        e = e || window.event;\n\n        if (e) {\n          e.returnValue = '关闭提示';\n        }\n\n        return '关闭提示';\n      }; // this.$router.push('/answer');\n\n    }\n  },\n  watch: {\n    questionForm: {\n      handler: function handler() {\n        if (this.questionForm.length == this.questionData.length) {\n          console.log('执行');\n          console.log(this.questionForm.length);\n          this.showOption = true;\n        } else {\n          this.showOption = false;\n        }\n      },\n      deep: true\n    }\n  }\n};",{"version":3,"sources":["answer.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 题库 -->\r\n<template>\r\n\t<div class=\"card-main\">\r\n\t\t<el-card shadow=\"never\">\r\n\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<el-row :gutter=\"10\" style=\"\">\r\n\t\t\t\t<el-col :span=\"18\">\r\n\t\t\t\t\t<el-container style=\"box-shadow:lightgray 0px 0px 10px;height: calc(100vh - 200px);\">\r\n\t\t\t\t\t\t<el-header style=\"background-color: skyblue;height:60px;line-height: 60px;\">\r\n\t\t\t\t\t\t\t<font style=\"font-size: 20px;color: white;margin-left: 20px;\">{{questionBankInfo.questionBankName}}</font>\r\n\t\t\t\t\t\t</el-header>\r\n\t\t\t\t\t\t<el-main>\r\n\t\t\t\t\t\t\t<div style=\"margin-bottom: 20px;font-size: 18px;\">{{questionBankInfo.questionBankIntroduce+'     ('+questionBankInfo.testPurpose+')'}}</div>\r\n\t\t\t\t\t\t\t<div v-for=\"(val,index) in questionData\" :key=\"index\" style=\"margin-bottom: 20px;\">\r\n\t\t\t\t\t\t\t\t<a :name=\"'index'+(index+1)\"></a>\r\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 10px;font-size: 18px;\">{{index+1}}{{'. '+val.question}}</div>\r\n\t\t\t\t\t\t\t\t<el-radio-group v-model=\"questionForm[index].value\" @change=\"chooseValue(index)\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"optionStyle\"><el-radio label=\"A\"><font>{{val.optionA}}</font></el-radio></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"optionStyle\"><el-radio label=\"B\"><font>{{val.optionB}}</font></el-radio></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"optionStyle\" v-if=\"val.optionC!=null\"><el-radio label=\"C\"><font>{{val.optionC}}</font></el-radio></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"optionStyle\" v-if=\"val.optionD!=null\"><el-radio label=\"D\"><font>{{val.optionD}}</font></el-radio></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"optionStyle\" v-if=\"val.optionE!=null\"><el-radio label=\"E\"><font>{{val.optionE}}</font></el-radio></div>\r\n\t\t\t\t\t\t\t\t</el-radio-group>\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-main>\r\n\t\t\t\t\t\t<el-footer style=\"text-align: center;\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" round @click=\"submitAnswer\">提交</el-button>\r\n\t\t\t\t\t\t\t<el-button round @click=\"cancelanswer=true\">取消</el-button>\r\n\t\t\t\t\t\t</el-footer>\r\n\t\t\t\t\t</el-container>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"6\" v-if=\"showOption\">\r\n\t\t\t\t\t<div style=\"box-shadow:lightgray 0px 0px 10px;height: calc(100vh - 200px);\">\r\n\t\t\t\t\t\t<div style=\"border-bottom:1px solid lightcyan;background-color: skyblue;height:60px;line-height: 60px;\">\r\n\t\t\t\t\t\t\t<font style=\"font-size: 20px;color: white;margin-left: 20px;\">题号</font>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<el-row :gutter=\"0\" style=\"margin-top: 10px;\">\r\n\t\t\t\t\t\t\t<el-col :span=\"6\" v-for=\"index in questionNum\" style=\"margin:5px 0px;text-align: center;\">\r\n\t\t\t\t\t\t\t\t<a :href=\"'#index'+index\" :id=\"'book'+index\" v-if=\"questionForm[index-1].value==''\">\r\n\t\t\t\t\t\t\t\t\t<el-button v-if=\"index<10\">{{'0'+index}}</el-button>\r\n\t\t\t\t\t\t\t\t\t<el-button v-if=\"index>=10\">{{index}}</el-button>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t<a :href=\"'#index'+index\" :id=\"'book'+index\" v-if=\"questionForm[index-1].value!=''\">\r\n\t\t\t\t\t\t\t\t\t<el-button v-if=\"index<10\" style=\"background-color: #87ceeb; color:white;\">{{'0'+index}}</el-button>\r\n\t\t\t\t\t\t\t\t\t<el-button v-if=\"index>=10\" style=\"background-color: #87ceeb; color:white;\">{{index}}</el-button>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t</el-row>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t\t<!-- 退出答题界面提示 -->\r\n\t\t\t<el-dialog\r\n\t\t\t  title=\"提示\"\r\n\t\t\t  :visible.sync=\"cancelanswer\"\r\n\t\t\t  center\r\n\t\t\t  width=\"500px\"\r\n\t\t\t  :close-on-click-modal='false'>\r\n\t\t\t  <span style=\"font-size: 18px;\"><i class=\"el-icon-warning\" style=\"font-size: 20px;color: orange;\"></i>返回题库，该操作不会保存所选答案，是否继续？</span>\r\n\t\t\t  <span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t    <el-button @click=\"cancelanswer = false\" round>取 消</el-button>\r\n\t\t\t    <el-button type=\"primary\" @click=\"goBack\" round>确 定</el-button>\r\n\t\t\t  </span>\r\n\t\t\t</el-dialog>\r\n\t\t\t\r\n\t\t\t<!-- 提交答题提示 -->\r\n\t\t\t<el-dialog\r\n\t\t\t  title=\"提示\"\r\n\t\t\t  :visible.sync=\"submitanswer\"\r\n\t\t\t  center\r\n\t\t\t  width=\"30%\"\r\n\t\t\t  :close-on-click-modal='false'>\r\n\t\t\t  <span><i class=\"el-icon-warning\"></i>返回题库，该操作不会保存所选答案，是否继续？</span>\r\n\t\t\t  <span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t    <el-button @click=\"submitanswer = false\" round>取 消</el-button>\r\n\t\t\t    <el-button type=\"primary\" @click=\"goBack\" round>确 定</el-button>\r\n\t\t\t  </span>\r\n\t\t\t</el-dialog>\r\n\t\t</el-card>\r\n\t</div>\n</template>\n\n<script>\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tquestionNum:0,//测试题总数\r\n\t\t\t\tquestionData:[],//存放测试题\r\n\t\t\t\tquestionForm:[],//存放答题结果\r\n\t\t\t\tcancelanswer:false,//是否显示   退出答题界面提示\r\n\t\t\t\tsubmitanswer:false,//是否显示   提交答题提示\r\n\t\t\t\tshowOption:false,//选择答案后题号的样式\r\n\t\t\t\tquestionBankInfo:{},//题库信息\r\n\t\t\t\tanswerDatas:{},//学生成绩\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t//刷新界面时提示\r\n\t\t\tthis.listenPage();\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getAnswers();\r\n\t\t\tthis.getQuestionBank();\r\n\t\t\tthis.getQuestions();\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgoBack(){\r\n\t\t\t\tthis.cancelanswer = false\r\n\t\t\t\tthis.$router.push('/index/'+this.$route.params.account+'/questionbank');\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//提交答案\r\n\t\t\tsubmitAnswer(){\r\n\t\t\t\tfor(var i=0;i<this.questionForm.length;i++){\r\n\t\t\t\t\tvar total=this.questionForm.length-1;\r\n\t\t\t\t\tif(this.questionForm[i].value==''){\r\n\t\t\t\t\t\tvar text='book'+(i+1);\r\n\t\t\t\t\t\tconsole.log('执行');\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\tmessage: '第'+(i+1)+'题没有选择，请选择答案后再提交！',\r\n\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdocument.getElementById(text).click();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this.questionForm[total].value!='' && i==total){\r\n\t\t\t\t\t\tvar name=this.$route.params.bankId.substring(0,5);\r\n\t\t\t\t\t\tvar sum=0;\r\n\t\t\t\t\t\tfor(var i=0;i<this.questionForm.length;i++){\r\n\t\t\t\t\t\t\tswitch(this.questionForm[i].value){\r\n\t\t\t\t\t\t\t\tcase 'A':sum=sum+this.questionBankInfo.scoreA;break;\r\n\t\t\t\t\t\t\t\tcase 'B':sum=sum+this.questionBankInfo.scoreB;break;\r\n\t\t\t\t\t\t\t\tcase 'C':sum=sum+this.questionBankInfo.scoreC;break;\r\n\t\t\t\t\t\t\t\tcase 'D':sum=sum+this.questionBankInfo.scoreD;break;\r\n\t\t\t\t\t\t\t\tcase 'E':sum=sum+this.questionBankInfo.scoreE;break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log('总分');\r\n\t\t\t\t\t\tconsole.log(sum);\r\n\t\t\t\t\t\tconsole.log('成绩');\r\n\t\t\t\t\t\tconsole.log(this.answerDatas);\r\n\t\t\t\t\t\tthis.$set(this.answerDatas,name,sum);\r\n\t\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t\t\tmethod: 'put',\r\n\t\t\t\t\t\t\turl:this.COMMON.apiUrl2+'/t-self-identification/update',\r\n\t\t\t\t\t\t\tdata: this.answerDatas\r\n\t\t\t\t\t\t}).then(response => { // 请求成功\r\n\t\t\t\t\t\t\tconsole.log('数据修改成功');\r\n\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\tmessage: '答案提交成功！',\r\n\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.$router.push('/index/'+this.$route.params.account+'/questionbank');\r\n\t\t\t\t\t\t}).catch(error => { // 请求失败\r\n\t\t\t\t\t\t\tconsole.log('请求失败'); \r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetQuestionBank(){\r\n\t\t\t\tvar id=this.$route.params.bankId.substring(4,5);\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\turl:this.COMMON.apiUrl2+'/question-bank/getById',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tquestion_bank_id:id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(response => { // 请求成功\r\n\t\t\t\t\tconsole.log('response  xxxx');\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\tvar data=response.data.data;\r\n\t\t\t\t\tthis.questionBankInfo=data;\r\n\t\t\t\t}).catch(error => { // 请求失败\r\n\t\t\t\t\tconsole.log('请求失败'); \r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取题库\r\n\t\t\tgetQuestions(){\r\n\t\t\t\tvar id=this.$route.params.bankId.substring(4,5);\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\turl:this.COMMON.apiUrl2+'/questions/getById',\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\tquestion_bank_id:id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(response => { // 请求成功\r\n\t\t\t\t\tconsole.log('response  yyy');\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\tvar data=response.data.data;\r\n\t\t\t\t\tthis.questionData=data;\r\n\t\t\t\t\tthis.questionNum=this.questionData.length;\r\n\t\t\t\t\tfor(var i=0;i<this.questionData.length;i++){\r\n\t\t\t\t\t\tthis.$set(this.questionForm,i,{value:''})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => { // 请求失败\r\n\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetAnswers(){\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\turl:this.COMMON.apiUrl2+'/t-self-identification/getStudentScoreById',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tstudentId:this.$route.params.account\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(response => { // 请求成功\r\n\t\t\t\t\tconsole.log('学生成绩');\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\tvar data=response.data.data[0];\r\n\t\t\t\t\tthis.answerDatas=data;\r\n\t\t\t\t}).catch(error => { // 请求失败\r\n\t\t\t\t\tconsole.log('请求失败'); \r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//选择选项时执行\r\n\t\t\tchooseValue(num){\r\n\t\t\t\tconsole.log('num');\r\n\t\t\t\tconsole.log(num);\r\n\t\t\t\tconsole.log(this.questionForm[num].value);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//答题界面刷新执行\r\n\t\t\tlistenPage() {\r\n\t\t\t\twindow.onbeforeunload = function (e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tif (e) {\r\n\t\t\t\t\t\te.returnValue = '关闭提示';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn '关闭提示';\r\n\t\t\t\t};\r\n\t\t\t\t// this.$router.push('/answer');\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tquestionForm:{\r\n\t\t\t\thandler(){\r\n\t\t\t\t\tif(this.questionForm.length==this.questionData.length){\r\n\t\t\t\t\t\tconsole.log('执行')\r\n\t\t\t\t\t\tconsole.log(this.questionForm.length);\r\n\t\t\t\t\t\tthis.showOption=true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.showOption=false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped=\"scoped\">\r\n\t.cardStyle{\r\n\t\t/* border:1px solid black; */\r\n\t\tmargin-bottom: 50px;\r\n\t}\r\n\t\r\n\t.card-main{\r\n\t\t/* padding:30px; */\r\n\t}\r\n\t\r\n\t.optionStyle{\r\n\t\theight:40px;\r\n\t\twidth:100%;\r\n\t\t/* border:1px solid #000000; */\r\n\t\tmargin-left:30px;\r\n\t}\r\n\t.optionStyle font{\r\n\t\tfont-size: 16px;\r\n\t}\n</style>\n"],"sourceRoot":"src/components/question_bank"}]}